name: 'Test Report'
on:
  workflow_run:
    workflows: ['Test and Build'] # runs after CI workflow
    types:
      - completed

permissions:
  contents: read
  actions: read
  checks: write

jobs:
  report:
    name: Generate Test Reports
    runs-on: ubuntu-latest

    steps:
    - name: Generate JEST test report
      uses: dorny/test-reporter@6e6a65b7a0bd2c9197df7d0ae36ac5cee784230c # v2
      with:
        artifact: test-reports
        name: JEST Tests
        path: 'reports/jest/report.xml'
        reporter: jest-junit
    - name: Generate E2E test report
      uses: dorny/test-reporter@6e6a65b7a0bd2c9197df7d0ae36ac5cee784230c # v2
      with:
        artifact: test-reports
        name: E2E Tests
        path: 'reports/playwright/report.xml'
        reporter: jest-junit
